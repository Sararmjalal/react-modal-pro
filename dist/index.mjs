import{jsx as e,jsxs as r,Fragment as n}from"react/jsx-runtime";import{createContext as t,useState as o,useContext as l,useEffect as s,useRef as a,Fragment as i,createElement as d}from"react";import{createPortal as c}from"react-dom";function h(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]])}return n}"function"==typeof SuppressedError&&SuppressedError;const u=t(void 0),m=({children:r})=>{const n=JSON.parse(JSON.stringify({open:!1,willBeClosed:!1})),[t,l]=o({});return e(u.Provider,{value:{modals:t,setModal:e=>{l((r=>Object.assign(Object.assign({},r),{[e]:n})))},setOpen:(e,r)=>{l((n=>Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},n[e]),{open:r})})))},setWillBeClosed:(e,r)=>{l((n=>Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},n[e]),{willBeClosed:r})})))},removeModal:e=>{l((r=>{const t=Object.assign({},r);return t[e]&&(t[e]=n),t}))},initialModal:n},children:r})},p=t(void 0),y=r=>{const{children:n,defaultBackdropClassName:t,defaultCanDismiss:o,defaultCloseDuration:l,defaultOpenDuration:s,defaultSheetClassName:a}=r,i={canDismiss:null==o||o,openDuration:null!=s?s:400,closeDuration:null!=l?l:300,sheetClassName:null!=a?a:"",backdropClassName:null!=t?t:""},{openDuration:d,closeDuration:c,sheetClassName:h,backdropClassName:u,canDismiss:m}=i;return e(p.Provider,{value:{openDuration:d,closeDuration:c,sheetClassName:h,backdropClassName:u,canDismiss:m},children:n})};function b(e,r){void 0===r&&(r={});var n=r.insertAt;if(e&&"undefined"!=typeof document){var t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}b(":root {\r\n  --react-modal-pro-sheet-radius: 12px;\r\n  --react-modal-pro-sheet-padding: 24px;\r\n  --react-modal-pro-sheet-background: #ffffff;\r\n  --react-modal-pro-backdrop-background: #0000004a;\r\n}\r\n\r\nhtml {\r\n  height: -webkit-fill-available;\r\n}\r\n\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n@keyframes dialog-fade-in {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n\r\n  100% {\r\n    opacity: initial;\r\n  }\r\n}\r\n\r\n@keyframes dialog-fade-out {\r\n  0% {\r\n    opacity: initial;\r\n  }\r\n\r\n  100% {\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n@keyframes slide-bottom-in {\r\n  0% {\r\n    bottom: -100%;\r\n  }\r\n\r\n  100% {\r\n    bottom: 0;\r\n  }\r\n}\r\n\r\n@keyframes slide-bottom-out {\r\n  0% {\r\n    bottom: 0;\r\n  }\r\n\r\n  100% {\r\n    bottom: -100%;\r\n  }\r\n}\r\n\r\n@keyframes slide-top-in {\r\n  0% {\r\n    top: -100%;\r\n  }\r\n\r\n  100% {\r\n    top: 0;\r\n  }\r\n}\r\n\r\n@keyframes slide-top-out {\r\n  0% {\r\n    top: 0;\r\n  }\r\n\r\n  100% {\r\n    top: -100%;\r\n  }\r\n}\r\n\r\n@keyframes slide-left-in {\r\n  0% {\r\n    left: -100%;\r\n  }\r\n\r\n  100% {\r\n    left: 0;\r\n  }\r\n}\r\n\r\n@keyframes slide-left-out {\r\n  0% {\r\n    left: 0;\r\n  }\r\n\r\n  100% {\r\n    left: -100%;\r\n  }\r\n}\r\n\r\n@keyframes slide-right-in {\r\n  0% {\r\n    right: -100%;\r\n  }\r\n\r\n  100% {\r\n    right: 0;\r\n  }\r\n}\r\n\r\n@keyframes slide-right-out {\r\n  0% {\r\n    right: 0;\r\n  }\r\n\r\n  100% {\r\n    right: -100%;\r\n  }\r\n}");const f=r=>{var{children:n}=r,t=h(r,["children"]);return s((()=>{if(!document.getElementById("pro-modal-root")){const e=document.createElement("div");e.setAttribute("id","pro-modal-root"),document.body.append(e)}}),[]),e(y,Object.assign({},t,{children:e(m,{children:n})}))};var g="style-module_backdrop__DzrB2",_="style-module_sheet__wQbZT";b(".style-module_backdrop__DzrB2 {\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    z-index: 1000;\r\n    position: fixed;\r\n    opacity: 1;\r\n    background: var(--react-modal-pro-backdrop-background);\r\n}\r\n\r\n.style-module_sheet__wQbZT {\r\n    top: 50%;\r\n    left: 50%;\r\n    opacity: 1;\r\n    padding: var(--react-modal-pro-sheet-padding);\r\n    z-index: 1010;\r\n    position: fixed;\r\n    transform: translate(-50%, -50%);\r\n    border-radius: var(--react-modal-pro-sheet-radius);\r\n    background: var(--react-modal-pro-sheet-background);\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n    .style-module_sheet__wQbZT {\r\n        min-width: 80%;\r\n        min-height: 200px;\r\n    }\r\n}\r\n\r\n@media only screen and (min-width: 601px) {\r\n    .style-module_sheet__wQbZT {\r\n        min-width: 400px;\r\n        min-height: 250px;\r\n    }\r\n}");const v=t=>{const{open:o,openDuration:l,willBeClosed:s,handleClose:a,closeDuration:i,children:d,sheetClassName:h="",backdropClassName:u="",ref:m}=t,p={backdrop:{false:`dialog-fade-in ${l}ms`,true:`dialog-fade-out ${i}ms`},sheet:{false:`dialog-fade-in ${l}ms`,true:`dialog-fade-out ${i}ms`}};return o?c(r(n,{children:[e("div",{onClick:a,className:`${g} ${u}`,style:{animation:p.backdrop[`${s}`]}}),e("div",{ref:m,className:`${_} ${h}`,style:{animation:p.sheet[`${s}`]},children:d})]}),document.getElementById("pro-modal-root")):null},w=({key:e,closeCb:r,canDismiss:n,closeDuration:t})=>{var a;const i=`#${e}`,{navigate:d,path:c}=(()=>{const[e,r]=o(window.location.pathname+window.location.hash);return s((()=>{const e=()=>{r(window.location.pathname)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]),{path:e,navigate:e=>{window.history.pushState({},"",e),r(e)}}})(),{modals:h,setModal:m,setOpen:p,setWillBeClosed:y,removeModal:b,initialModal:f}=(()=>{const e=l(u);if(!e)throw new Error("useModals must be used within a ModalsProvider");return e})(),g=null!==(a=h[e])&&void 0!==a?a:f,{willBeClosed:_}=g,v=()=>{const r=window.location.hash;return{isAlreadyInHash:r.split("#").some((r=>r===e)),currentHash:r}};s((()=>{h[e]||m(e)}),[]),s((()=>{const{isAlreadyInHash:r}=v();p(e,r),!r&&_&&y(e,!1)}),[c]),s((()=>{if(_){const{isAlreadyInHash:n}=v();n?setTimeout((()=>{window.history.back(),r&&r()}),t-50):b(e)}}),[_]);return Object.assign(Object.assign({},g),{handleOpenModal:()=>{const{isAlreadyInHash:e,currentHash:r}=v();e||d(r+i)},handleCloseModal:()=>{n&&y(e,!0)}})},k=`${"modal"}_${Date.now().toString(36)+Math.random().toString(36).substring(2)}`;const O=e=>{const{modalKey:r,swipeThreshold:n,swipeToClose:t=!1,swipeToOpen:i=!1,sidebarDirection:d,backdropClassName:c,sheetClassName:h,canDismiss:u,openDuration:m,closeDuration:y,sheetRef:b,closeCb:f}=e,g=null!=r?r:k,{backdropClassName:_,canDismiss:v,closeDuration:O,openDuration:C,sheetClassName:M}=(()=>{const e=l(p);if(!e)throw new Error("useModalDefaults must be used within a ModalDefaultsProvider");return e})(),{open:x,willBeClosed:D,handleOpenModal:E,handleCloseModal:S}=w({key:g,closeCb:f,canDismiss:null!=u?u:v,closeDuration:null!=y?y:O}),{isNearStart:j,isNearEnd:N}=(({ref:e,offset:r=100,key:n})=>{const[t,l]=o(!1),[a,i]=o(!0);return s((()=>{if(!e||!(null==e?void 0:e.current))return;const n=()=>{const n=e.current;if(!n)return;const{scrollTop:t,scrollHeight:o,clientHeight:s}=n,a=o-(t+s);i(t<=r),l(a<=r)},t=e.current;return t.addEventListener("scroll",n),()=>{t.removeEventListener("scroll",n)}}),[e,r,n]),{isNearEnd:t,isNearStart:a}})({key:g,ref:x?b:void 0}),H=t?"bottom"===d&&j||"top"===d&&N||"left"===d||"right"===d:i,$="left"===d||"right"===d?"horizontal":"vertical",T={onSwipeUp:()=>"top"===d&&t?S():"bottom"===d&&i?E():void 0,onSwipeDown:()=>"top"===d&&i?E():"bottom"===d&&t?S():void 0,onSwipeRight:()=>"left"===d&&i?E():"right"===d&&t?S():void 0,onSwipeLeft:()=>"right"===d&&i?E():"left"===d&&t?S():void 0};return(({direction:e,onSwipeUp:r,onSwipeDown:n,onSwipeLeft:t,onSwipeRight:o,threshold:l=100,enabled:i=!0,key:d})=>{const c=a(null),h=a({x:0,y:0}),u=e=>{c.current={x:e.touches[0].clientX,y:e.touches[0].clientY},h.current={x:0,y:0}},m=e=>{if(!c.current)return;const r=e.touches[0].clientX,n=e.touches[0].clientY,t=r-c.current.x,o=n-c.current.y;h.current={x:t,y:o}},p=()=>{if(!c.current)return;const{x:s,y:a}=h.current,i=Math.abs(s),d=Math.abs(a);({vertical:()=>{console.log({absDiffY:d}),d>l&&(a>0&&n?n():r&&(console.log("yessssssss"),r()))},horizontal:()=>{i>l&&(s>0&&o?o():t&&t())}})[e](),c.current=null,h.current={x:0,y:0}};s((()=>{if(i)return window.addEventListener("touchstart",u),window.addEventListener("touchmove",m),window.addEventListener("touchend",p),()=>{window.removeEventListener("touchstart",u),window.removeEventListener("touchmove",m),window.removeEventListener("touchend",p)}}),[i,d])})(Object.assign(Object.assign({},T),{key:g,enabled:H,threshold:n,direction:$})),{currentModalKey:g,backdropClassName:null!=c?c:_,canDismiss:null!=u?u:v,closeDuration:null!=y?y:O,openDuration:null!=m?m:C,sheetClassName:null!=h?h:M,handleOpenModal:E,handleCloseModal:S,open:x,willBeClosed:D}},C=n=>{var{TriggerElement:t,children:o}=n,l=h(n,["TriggerElement","children"]);const c=a(void 0),u=O(Object.assign(Object.assign({},l),{sheetRef:c})),{handleOpenModal:m,handleCloseModal:p,currentModalKey:y}=u,b=h(u,["handleOpenModal","handleCloseModal","currentModalKey"]);return s((()=>{if(b.open)return document.body.style.overscrollBehavior="none",()=>{document.body.style.overscrollBehavior="initial"}}),[b.open]),r(i,{children:[e("div",{onClick:m,children:t}),d(v,Object.assign({},b,{key:y,handleClose:p,ref:c}),o)]})};var M={backdrop:"style-module_backdrop__HHTDx",sheet:"style-module_sheet__SMOKH",bottom:"style-module_bottom__E2hqc",top:"style-module_top__1dEkG",left:"style-module_left__eyrET",right:"style-module_right__Qur9w"};b(".style-module_backdrop__HHTDx {\r\n  top: 0;\r\n  left: 0;\r\n  width: 100svw;\r\n  height: 100svh;\r\n  z-index: 990;\r\n  position: fixed;\r\n  opacity: 1;\r\n  background: var(--react-modal-pro-backdrop-background);\r\n}\r\n\r\n.style-module_sheet__SMOKH {\r\n  position: fixed;\r\n  opacity: 1;\r\n  z-index: 1000;\r\n  background: var(--react-modal-pro-sheet-background);\r\n  padding: var(--react-modal-pro-sheet-padding);\r\n  overflow-y: auto;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_bottom__E2hqc {\r\n  left: 50%;\r\n  bottom: 0;\r\n  border-top-right-radius: var(--react-modal-pro-sheet-radius);\r\n  border-top-left-radius: var(--react-modal-pro-sheet-radius);\r\n  transform: translateX(-50%);\r\n  max-height: 80vh;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_top__1dEkG {\r\n  left: 50%;\r\n  top: 0;\r\n  border-bottom-right-radius: var(--react-modal-pro-sheet-radius);\r\n  border-bottom-left-radius: var(--react-modal-pro-sheet-radius);\r\n  transform: translateX(-50%);\r\n  max-height: 80vh;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_left__eyrET {\r\n  bottom: 0;\r\n  left: 0;\r\n  border-top-right-radius: var(--react-modal-pro-sheet-radius);\r\n  border-bottom-right-radius: var(--react-modal-pro-sheet-radius);\r\n  height: -webkit-fill-available;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_right__Qur9w {\r\n  top: 0;\r\n  right: 0;\r\n  border-top-left-radius: var(--react-modal-pro-sheet-radius);\r\n  border-bottom-left-radius: var(--react-modal-pro-sheet-radius);\r\n  height: -webkit-fill-available;\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n\r\n  .style-module_sheet__SMOKH.style-module_bottom__E2hqc,\r\n  .style-module_sheet__SMOKH.style-module_top__1dEkG {\r\n    width: 100vw;\r\n    max-width: 80%;\r\n    min-height: 458px;\r\n  }\r\n\r\n  .style-module_sheet__SMOKH.style-module_left__eyrET,\r\n  .style-module_sheet__SMOKH.style-module_right__Qur9w {\r\n    min-width: 50%;\r\n    max-width: 80%;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 601px) {\r\n\r\n  .style-module_sheet__SMOKH.style-module_bottom__E2hqc,\r\n  .style-module_sheet__SMOKH.style-module_top__1dEkG {\r\n    min-width: 580px;\r\n    min-height: 458px;\r\n  }\r\n\r\n  .style-module_sheet__SMOKH.style-module_left__eyrET,\r\n  .style-module_sheet__SMOKH.style-module_right__Qur9w {\r\n    min-width: 33%;\r\n  }\r\n}");const x=n=>{const{open:t,openDuration:o,willBeClosed:l,handleClose:s,closeDuration:a,children:d,sheetClassName:h,backdropClassName:u,direction:m,ref:p}=n,y={bottom:{open:"slide-bottom-in",close:"slide-bottom-out"},top:{open:"slide-top-in",close:"slide-top-out"},left:{open:"slide-left-in",close:"slide-left-out"},right:{open:"slide-right-in",close:"slide-right-out"}},b={backdrop:{false:`dialog-fade-in ${o}ms`,true:`dialog-fade-out ${a}ms`},sheet:{false:`${y[m].open} ${o}ms`,true:`${y[m].close} ${a}ms`}};return t?c(r(i,{children:[e("div",{onClick:s,className:`${M.backdrop} ${u}`,style:{animation:b.backdrop[`${l}`]}}),e("div",{ref:p,className:`${M.sheet} ${h} ${M[m]}`,style:{animation:b.sheet[`${l}`]},children:d})]}),document.getElementById("pro-modal-root")):null},D=n=>{var{TriggerElement:t,direction:o,children:l}=n,c=h(n,["TriggerElement","direction","children"]);const u=a(void 0),m=O(Object.assign(Object.assign({},c),{sheetRef:u,sidebarDirection:o})),{handleOpenModal:p,handleCloseModal:y,currentModalKey:b}=m,f=h(m,["handleOpenModal","handleCloseModal","currentModalKey"]);return s((()=>{if(f.open)return document.body.style.overscrollBehavior="none",()=>{document.body.style.overscrollBehavior="initial"}}),[f.open]),r(i,{children:[e("div",{onClick:p,children:t}),d(x,Object.assign({},f,{direction:o,key:b,handleClose:y,ref:u}),l)]})},E=n=>{var{direction:t}=n,o=h(n,["direction"]);const l=a(void 0),s=O(Object.assign(Object.assign({sheetRef:l},o),{sidebarDirection:t})),{handleOpenModal:c,handleCloseModal:u,currentModalKey:m}=s,p=h(s,["handleOpenModal","handleCloseModal","currentModalKey"]);return r(i,{children:[e("div",{style:{width:"fit-content"},onClick:()=>c(),children:o.TriggerElement}),d(x,Object.assign({},p,{key:m,direction:t,handleClose:u,ref:l}),o.children)]})};export{C as Dialog,f as ProModalProvider,D as ProSheet,E as Sidebar,O as useModalPro};
//# sourceMappingURL=index.mjs.map
