import{jsx as e,jsxs as t,Fragment as r}from"react/jsx-runtime";import{createContext as n,useState as o,useContext as s,useRef as l,useEffect as a,Fragment as i,createElement as d}from"react";import{createPortal as c}from"react-dom";function h(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}"function"==typeof SuppressedError&&SuppressedError;const u=n(void 0),m=({children:t})=>{const r=JSON.parse(JSON.stringify({open:!1,willBeClosed:!1})),[n,s]=o({});return e(u.Provider,{value:{modals:n,setModal:e=>{s((t=>Object.assign(Object.assign({},t),{[e]:r})))},setOpen:(e,t)=>{s((r=>Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},r[e]),{open:t})})))},setWillBeClosed:(e,t)=>{s((r=>Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},r[e]),{willBeClosed:t})})))},removeModal:e=>{s((t=>{const n=Object.assign({},t);return n[e]&&(n[e]=r),n}))},initialModal:r},children:t})},p=n(void 0),_=t=>{const{children:r,defaultBackdropClassName:n,defaultCanDismiss:o,defaultCloseDuration:s,defaultOpenDuration:l,defaultSheetClassName:a}=t,i={canDismiss:null==o||o,openDuration:null!=l?l:400,closeDuration:null!=s?s:300,sheetClassName:null!=a?a:"",backdropClassName:null!=n?n:""},{openDuration:d,closeDuration:c,sheetClassName:h,backdropClassName:u,canDismiss:m}=i;return e(p.Provider,{value:{openDuration:d,closeDuration:c,sheetClassName:h,backdropClassName:u,canDismiss:m},children:r})},y=t=>{var{children:r}=t,n=h(t,["children"]);return e(_,Object.assign({},n,{children:e(m,{children:r})}))};function b(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var f="style-module_backdrop__DzrB2",g="style-module_sheet__wQbZT";b(".style-module_backdrop__DzrB2 {\r\n    top: 0;\r\n    left: 0;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    z-index: 1000;\r\n    position: fixed;\r\n    opacity: 1;\r\n    background: var(--react-modal-pro-backdrop-background);\r\n}\r\n\r\n.style-module_sheet__wQbZT {\r\n    top: 50%;\r\n    left: 50%;\r\n    opacity: 1;\r\n    padding: var(--react-modal-pro-sheet-padding);\r\n    z-index: 1010;\r\n    position: fixed;\r\n    transform: translate(-50%, -50%);\r\n    border-radius: var(--react-modal-pro-sheet-radius);\r\n    background: var(--react-modal-pro-sheet-background);\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n    .style-module_sheet__wQbZT {\r\n        min-width: 80%;\r\n        min-height: 200px;\r\n    }\r\n}\r\n\r\n@media only screen and (min-width: 601px) {\r\n    .style-module_sheet__wQbZT {\r\n        min-width: 400px;\r\n        min-height: 250px;\r\n    }\r\n}");const v=n=>{const{open:o,openDuration:s,willBeClosed:l,handleClose:a,closeDuration:i,children:d,sheetClassName:h="",backdropClassName:u="",ref:m}=n,p={backdrop:{false:`dialog-fade-in ${s}ms`,true:`dialog-fade-out ${i}ms`},sheet:{false:`dialog-fade-in ${s}ms`,true:`dialog-fade-out ${i}ms`}};return o?c(t(r,{children:[e("div",{onClick:a,className:`${f} ${u}`,style:{animation:p.backdrop[`${l}`]}}),e("div",{ref:m,className:`${g} ${h}`,style:{animation:p.sheet[`${l}`]},children:d})]}),document.getElementById("modal-root")):null},w=({key:e,closeCb:t,canDismiss:r,closeDuration:n})=>{var l;const i=`#${e}`,{navigate:d,path:c}=(()=>{const[e,t]=o(window.location.pathname+window.location.hash);return a((()=>{const e=()=>{t(window.location.pathname)};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]),{path:e,navigate:e=>{window.history.pushState({},"",e),t(e)}}})(),{modals:h,setModal:m,setOpen:p,setWillBeClosed:_,removeModal:y,initialModal:b}=(()=>{const e=s(u);if(!e)throw new Error("useModals must be used within a ModalsProvider");return e})(),f=null!==(l=h[e])&&void 0!==l?l:b,{willBeClosed:g}=f,v=()=>{const t=window.location.hash;return{isAlreadyInHash:t.split("#").some((t=>t===e)),currentHash:t}};a((()=>{h[e]||m(e)}),[]),a((()=>{const{isAlreadyInHash:t}=v();p(e,t),!t&&g&&_(e,!1)}),[c]),a((()=>{if(g){const{isAlreadyInHash:r}=v();r?setTimeout((()=>{window.history.back(),t&&t()}),n-50):y(e)}}),[g]);return Object.assign(Object.assign({},f),{handleOpenModal:()=>{const{isAlreadyInHash:e,currentHash:t}=v();e||d(t+i)},handleCloseModal:()=>{r&&_(e,!0)}})},O=`${"modal"}_${Date.now().toString(36)+Math.random().toString(36).substring(2)}`;const C=e=>{const{modalKey:t,swipeThreshold:r,swipeToClose:n=!1,swipeToOpen:i=!1,sidebarDirection:d,backdropClassName:c,sheetClassName:h,canDismiss:u,openDuration:m,closeDuration:_,sheetRef:y,closeCb:b}=e,f=null!=t?t:O,{backdropClassName:g,canDismiss:v,closeDuration:C,openDuration:M,sheetClassName:k}=(()=>{const e=s(p);if(!e)throw new Error("useModalDefaults must be used within a ModalDefaultsProvider");return e})(),{open:D,willBeClosed:x,handleOpenModal:E,handleCloseModal:S}=w({key:f,closeCb:b,canDismiss:null!=u?u:v,closeDuration:null!=_?_:C}),{isNearStart:j,isNearEnd:N}=(({ref:e,offset:t=100,key:r})=>{const[n,s]=o(!1),[l,i]=o(!0);return a((()=>{if(!e||!(null==e?void 0:e.current))return;const r=()=>{const r=e.current;if(!r)return;const{scrollTop:n,scrollHeight:o,clientHeight:l}=r,a=o-(n+l);i(n<=t),s(a<=t)},n=e.current;return n.addEventListener("scroll",r),()=>{n.removeEventListener("scroll",r)}}),[e,t,r]),{isNearEnd:n,isNearStart:l}})({key:f,ref:D?y:void 0}),H=n?"bottom"===d&&j||"top"===d&&N||"left"===d||"right"===d:i,$="left"===d||"right"===d?"horizontal":"vertical",T={onSwipeUp:()=>"top"===d&&n?S():"bottom"===d&&i?E():void 0,onSwipeDown:()=>"top"===d&&i?E():"bottom"===d&&n?S():void 0,onSwipeRight:()=>"left"===d&&i?E():"right"===d&&n?S():void 0,onSwipeLeft:()=>"right"===d&&i?E():"left"===d&&n?S():void 0};return(({direction:e,onSwipeUp:t,onSwipeDown:r,onSwipeLeft:n,onSwipeRight:o,threshold:s=100,enabled:i=!0,key:d})=>{const c=l(null),h=l({x:0,y:0}),u=e=>{c.current={x:e.touches[0].clientX,y:e.touches[0].clientY},h.current={x:0,y:0}},m=e=>{if(!c.current)return;const t=e.touches[0].clientX,r=e.touches[0].clientY,n=t-c.current.x,o=r-c.current.y;h.current={x:n,y:o}},p=()=>{if(!c.current)return;const{x:l,y:a}=h.current,i=Math.abs(l),d=Math.abs(a);({vertical:()=>{console.log({absDiffY:d}),d>s&&(a>0&&r?r():t&&(console.log("yessssssss"),t()))},horizontal:()=>{i>s&&(l>0&&o?o():n&&n())}})[e](),c.current=null,h.current={x:0,y:0}};a((()=>{if(i)return window.addEventListener("touchstart",u),window.addEventListener("touchmove",m),window.addEventListener("touchend",p),()=>{window.removeEventListener("touchstart",u),window.removeEventListener("touchmove",m),window.removeEventListener("touchend",p)}}),[i,d])})(Object.assign(Object.assign({},T),{key:f,enabled:H,threshold:r,direction:$})),{currentModalKey:f,backdropClassName:null!=c?c:g,canDismiss:null!=u?u:v,closeDuration:null!=_?_:C,openDuration:null!=m?m:M,sheetClassName:null!=h?h:k,handleOpenModal:E,handleCloseModal:S,open:D,willBeClosed:x}},M=r=>{var{TriggerElement:n,children:o}=r,s=h(r,["TriggerElement","children"]);const c=l(void 0),u=C(Object.assign(Object.assign({},s),{sheetRef:c})),{handleOpenModal:m,handleCloseModal:p,currentModalKey:_}=u,y=h(u,["handleOpenModal","handleCloseModal","currentModalKey"]);return a((()=>{if(y.open)return document.body.style.overscrollBehavior="none",()=>{document.body.style.overscrollBehavior="initial"}}),[y.open]),t(i,{children:[e("div",{onClick:m,children:n}),d(v,Object.assign({},y,{key:_,handleClose:p,ref:c}),o)]})};var k={backdrop:"style-module_backdrop__HHTDx",sheet:"style-module_sheet__SMOKH",bottom:"style-module_bottom__E2hqc",top:"style-module_top__1dEkG",left:"style-module_left__eyrET",right:"style-module_right__Qur9w"};b(".style-module_backdrop__HHTDx {\r\n  top: 0;\r\n  left: 0;\r\n  width: 100svw;\r\n  height: 100svh;\r\n  z-index: 990;\r\n  position: fixed;\r\n  opacity: 1;\r\n  background: var(--react-modal-pro-backdrop-background);\r\n}\r\n\r\n.style-module_sheet__SMOKH {\r\n  position: fixed;\r\n  opacity: 1;\r\n  z-index: 1000;\r\n  background: var(--react-modal-pro-sheet-background);\r\n  padding: var(--react-modal-pro-sheet-padding);\r\n  overflow-y: auto;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_bottom__E2hqc {\r\n  left: 50%;\r\n  bottom: 0;\r\n  border-top-right-radius: var(--react-modal-pro-sheet-radius);\r\n  border-top-left-radius: var(--react-modal-pro-sheet-radius);\r\n  transform: translateX(-50%);\r\n  max-height: 80vh;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_top__1dEkG {\r\n  left: 50%;\r\n  top: 0;\r\n  border-bottom-right-radius: var(--react-modal-pro-sheet-radius);\r\n  border-bottom-left-radius: var(--react-modal-pro-sheet-radius);\r\n  transform: translateX(-50%);\r\n  max-height: 80vh;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_left__eyrET {\r\n  bottom: 0;\r\n  left: 0;\r\n  border-top-right-radius: var(--react-modal-pro-sheet-radius);\r\n  border-bottom-right-radius: var(--react-modal-pro-sheet-radius);\r\n  height: -webkit-fill-available;\r\n}\r\n\r\n.style-module_sheet__SMOKH.style-module_right__Qur9w {\r\n  top: 0;\r\n  right: 0;\r\n  border-top-left-radius: var(--react-modal-pro-sheet-radius);\r\n  border-bottom-left-radius: var(--react-modal-pro-sheet-radius);\r\n  height: -webkit-fill-available;\r\n}\r\n\r\n@media only screen and (max-width: 600px) {\r\n\r\n  .style-module_sheet__SMOKH.style-module_bottom__E2hqc,\r\n  .style-module_sheet__SMOKH.style-module_top__1dEkG {\r\n    width: 100vw;\r\n    max-width: 80%;\r\n    min-height: 458px;\r\n  }\r\n\r\n  .style-module_sheet__SMOKH.style-module_left__eyrET,\r\n  .style-module_sheet__SMOKH.style-module_right__Qur9w {\r\n    min-width: 50%;\r\n    max-width: 80%;\r\n  }\r\n}\r\n\r\n@media only screen and (min-width: 601px) {\r\n\r\n  .style-module_sheet__SMOKH.style-module_bottom__E2hqc,\r\n  .style-module_sheet__SMOKH.style-module_top__1dEkG {\r\n    min-width: 580px;\r\n    min-height: 458px;\r\n  }\r\n\r\n  .style-module_sheet__SMOKH.style-module_left__eyrET,\r\n  .style-module_sheet__SMOKH.style-module_right__Qur9w {\r\n    min-width: 33%;\r\n  }\r\n}");const D=r=>{const{open:n,openDuration:o,willBeClosed:s,handleClose:l,closeDuration:a,children:d,sheetClassName:h,backdropClassName:u,direction:m,ref:p}=r,_={bottom:{open:"slide-bottom-in",close:"slide-bottom-out"},top:{open:"slide-top-in",close:"slide-top-out"},left:{open:"slide-left-in",close:"slide-left-out"},right:{open:"slide-right-in",close:"slide-right-out"}},y={backdrop:{false:`dialog-fade-in ${o}ms`,true:`dialog-fade-out ${a}ms`},sheet:{false:`${_[m].open} ${o}ms`,true:`${_[m].close} ${a}ms`}};return n?c(t(i,{children:[e("div",{onClick:l,className:`${k.backdrop} ${u}`,style:{animation:y.backdrop[`${s}`]}}),e("div",{ref:p,className:`${k.sheet} ${h} ${k[m]}`,style:{animation:y.sheet[`${s}`]},children:d})]}),document.getElementById("modal-root")):null},x=r=>{var{TriggerElement:n,direction:o,children:s}=r,c=h(r,["TriggerElement","direction","children"]);const u=l(void 0),m=C(Object.assign(Object.assign({},c),{sheetRef:u,sidebarDirection:o})),{handleOpenModal:p,handleCloseModal:_,currentModalKey:y}=m,b=h(m,["handleOpenModal","handleCloseModal","currentModalKey"]);return a((()=>{if(b.open)return document.body.style.overscrollBehavior="none",()=>{document.body.style.overscrollBehavior="initial"}}),[b.open]),t(i,{children:[e("div",{onClick:p,children:n}),d(D,Object.assign({},b,{direction:o,key:y,handleClose:_,ref:u}),s)]})},E=r=>{var{direction:n}=r,o=h(r,["direction"]);const s=l(void 0),a=C(Object.assign(Object.assign({sheetRef:s},o),{sidebarDirection:n})),{handleOpenModal:c,handleCloseModal:u,currentModalKey:m}=a,p=h(a,["handleOpenModal","handleCloseModal","currentModalKey"]);return t(i,{children:[e("div",{style:{width:"fit-content"},onClick:()=>c(),children:o.TriggerElement}),d(D,Object.assign({},p,{key:m,direction:n,handleClose:u,ref:s}),o.children)]})};export{M as Dialog,y as ProModalProvider,x as ProSheet,E as Sidebar,C as useModalPro};
//# sourceMappingURL=index.mjs.map
